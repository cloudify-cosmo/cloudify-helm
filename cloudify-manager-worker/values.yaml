nameOverride: "cloudify-manager-worker"
fullnameOverride: "cloudify-manager-worker"

domain: "test-helm.svc.cluster.local"

image:
  repository: cloudifyplatform/premium-cloudify-manager-worker
  tag: 6.2.0
  ## Specify a imagePullPolicy
  ## Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'
  ## ref: http://kubernetes.io/docs/user-guide/images/#pre-pulling-images
  ##
  pullPolicy: IfNotPresent
  ## Optionally specify an array of imagePullSecrets.
  ## Secrets must be manually created in the namespace.
  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
  ##
  pullSecrets: []
  #- name: secretName
  initContainer:
    repository: busybox
    tag: latest
    pullPolicy: Always

db:
  host: postgres-postgresql
  cloudifyDBName: 'cloudify_db'
  cloudifyUsername: 'cloudify'
  cloudifyPassword: 'cloudify'
  serverDBName: 'postgres'
  serverUsername: 'postgres'
  serverPassword: 'cfy_test_pass'

queue:
  host: rabbitmq
  username: 'cfy_user'
  password: 'cfy_test_pass'

service:
  host: cloudify-manager-worker
  type: ClusterIP
  name: cloudify-manager-worker
  http:
    port: 80
  https:
    port: 443
  internal_rest:
    port: 53333

nodeSelector: {}

secret:
  name: cfy-certs

# imagePullSecrets:
#   secretName: dockerhub

# Multiple replicas - NFS like storage only, storage_class: 'aws-efs', access_mode: 'ReadWriteMany'
# Single replica - EBS, storage_class: 'gp2', access_mode: 'ReadWriteOnce'
volume:
  storage_class: 'gp2'
  access_mode: 'ReadWriteOnce'
  size: "3Gi"

resources:
  requests:
    memory: 0.5Gi
    cpu: 0.5

config:
  # Multiple replicas works only with NFS like volume
  replicas: 1
  start_delay: 0
  install_plugins: false
  cli_local_profile_host_name: localhost
  security:
    ssl_enabled: false
    admin_password: admin
  tls_cert_path: /mnt/cloudify-data/ssl/tls.crt
  tls_key_path: /mnt/cloudify-data/ssl/tls.key
  ca_cert_path: /mnt/cloudify-data/ssl/ca.crt

readinessProbe:
  enabled: true
  port: 80
  path: /console
  successThreshold: 3
  initialDelaySeconds: 10

ingress:
  enabled: true
  host: cfy-efs-app.eks.cloudify.co
  annotations:
    kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: "letsencrypt-prod"
  tls:
    enabled: false
    secretName: cfy-secret-name
